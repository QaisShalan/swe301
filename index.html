<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CASH WITHDRAWAL SWE301</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <main>
    <div class="counter" id="counter-div"></div>
    <div class="loader">
      <div class="loader__image">
        <div class="loader__coin">
          <img src="https://www.dropbox.com/s/fzc3fidyxqbqhnj/loader-coin.png?raw=1" alt="">
        </div>
        <div class="loader__hand">
          <img src="https://www.dropbox.com/s/y8uqvjn811z6npu/loader-hand.png?raw=1" alt="">
        </div>
      </div>
    </div>
    <div>
      <div>
        <h1 class="title">CHOOSE YOUR OPTION</h1>
        <div>
          <label class="the-amount">Enter Withdrawal amount:</label>
          <input class="amount" onchange="handleAmount(0)" placeholder="Withdrawal-amount"></input>
          <button class="withdraw" onclick="handleWithDraw()">Withdraw</button>
        </div>
        <div>
          <label class="the-amount">Enter deposit amount:</label>
          <input class="amount" onchange="handleAmount(1)" placeholder="Deposit-Amount"></input>
          <button class="deposit" onclick="handleDeposit()">Deposit</button>
        </div>
        <div class="buttons">
          <button class="Reset" onclick="handleReset(2)">Reset</button>
          <a href="login.html">
            <button class="logout">Logout</button>
          </a>
        </div>
      </div>
    </div>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let counter = document.getElementById("counter-div");
      let child = document.createElement("p");
      child.value = 0;
      child.id = "counter";
      child.innerHTML = child.value + " TL";
      counter.appendChild(child);
    });

    function handleAmount(index) {
      return document.getElementsByClassName("amount")[index];
    }

    function handleWithDraw() {
      let amount = handleAmount(0);
      let counter = document.getElementById("counter");

      if (!isNaN(Number(amount.value)) && Number(amount.value) > 0) {
        counter.value = Number(counter.value) - Number(amount.value);
        amount.value = '';
        counter.innerHTML = `${counter.value} TL`;
      } else {
        alert("Invalid Amount");
        handleReset(0);
      }
    }

    function handleDeposit() {
      let amount = handleAmount(1);
      let counter = document.getElementById("counter");

      if (!isNaN(Number(amount.value)) && Number(amount.value) > 0) {
        counter.value = Number(counter.value) + Number(amount.value);
        amount.value = '';
        counter.innerHTML = `${counter.value} TL`;
      } else {
        alert("Invalid Amount");
        handleReset(1);
      }
    }

    function handleReset(value) {
      if (value === 2) {
        let inputs = document.getElementsByClassName("amount");
        for (let i = 0; i < inputs.length; i++) {
          inputs[i].value = '';
        }
      } else {
        document.getElementsByClassName("amount")[value].value = '';
      }
    }
  </script>
</body>
</html>
